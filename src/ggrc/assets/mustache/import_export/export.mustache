{{!
  Copyright (C) 2015 Google Inc., authors, and contributors <see AUTHORS file>
  Licensed under http://www.apache.org/licenses/LICENSE-2.0 <see LICENSE file>
  Created By: ivan@reciprocitylabs.com
  Maintained By: ivan@reciprocitylabs.com
}}

<csv-export filename="Export Objects">
<div class="info no-space">
  <div class="choose-object-wrap bottom-space">
    <div class="row-fluid">
      <div class="span12">
        <div class="report-title">
          {{#if export.edit_filename}}
            <div class="report-title-change">
              <input type="text" can-value="export.filename" class="input-medium" placeholder="Enter report name">
              <a class="btn btn-primary btn-title-change btn-small title-change" href="#">Save</a>
            </div>
          {{else}}
            <h2 class="title">
              {{export.filename}} <a class="btn-title-change report-title-trigger" href="#"><i class="grcicon-edit"></i></a>
            </h2>
          {{/if}}
        </div>
      </div>
    </div>

    <export-group panels="export.panels">
      <div class="relevant-filter-group">
        {{#each panels.items}}
          <div class="new-relevant-block">
            <export-panel type="{{type}}" data_grid="export.data_grid" item="." panel_number="{{@index}}">
              <div class="row-fluid">
                <div class="span4">
                  <h6>Export object type</h6>
                  <div class="single-line-filter">
                    {{#first_panel}}
                      <button type="submit" class="remove_filter_group">
                        <i class="grcicon-deleted"></i>
                      </button>
                    {{/first_panel}}
                    <select can-value="type" class="input-block-level option-type-selector">
                      <optgroup label="Governance">
                        <option value="Program">Programs</option>
                        <option value="Regulation">Regulations</option>
                        <option value="Standard">Standards</option>
                        <option value="Policy">Policies</option>
                        <option value="Contract">Contracts</option>
                        <option value="Objective">Objectives</option>
                        <option value="Control">Controls</option>
                        <option value="Section">Sections</option>
                        <option value="Clause">Clauses</option>
                      </optgroup>
                      <optgroup label="People/Groups">
                        <option value="People">People</option>
                        <option value="OrgGroup">Org Groups</option>
                      </optgroup>
                      <optgroup label="Assets/Business">
                        <option value="System">Systems</option>
                        <option value="Process">Processes</option>
                        <option value="DataAsset">Data Assets</option>
                        <option value="Facility">Facilities</option>
                        <option value="Market">Markets</option>
                        <option value="Product">Products</option>
                        <option value="Project">Projects</option>
                      </optgroup>
                    </select>
                  </div>
                </div>
              </div>

              {{> /static/mustache/import_export/export/attribute_selector.mustache}}
              {{> /static/mustache/import_export/export/filter_query.mustache}}

              {{#if export.data_grid}}
                {{#if_equals panel_number 0}}
                  <csv-relevance-filter type="export.type" panel_number="panel_number" relevance="item.relevance">
                    {{> /static/mustache/import_export/export/relevance.mustache}}
                  </csv-relevance-filter>
                {{/if}}
              {{else}}
                <csv-relevance-filter type="export.type" panel_number="panel_number" relevance="item.relevance">
                  {{> /static/mustache/import_export/export/relevance.mustache}}
                </csv-relevance-filter>
              {{/if}}
            </export-panel>
          </div>
        {{/each}}
      </div>
      <div class="add-rule add-object">
        <a href="#" id="addAnotherObjectType" class="addFilterRule btn btn-small btn-info">Export another object type</a>
      </div>
    </export-group>
  </div>
  <div class="save-template-wrap">
    {{#export.data_grid}}
      <div class="left-content">
        <label class="checkbox-inline">
          <input type="checkbox" can-value="export.only_relevant" name="only_relevant" checked="checked">
          Show only objects relevant to selected anchor objects
        </label>
      </div>
    {{/data_grid}}
    <div class="save-template">
      <span class="export-note">0 records will be exported</span>
      <div class="btn-group pull-right">
        <button type="submit" class="btn btn-success btn-small">
          <i class="grcicon-export-white"></i> Export Data
        </button>
      </div>
    </div>
  </div>
</div>
</csv-export>
