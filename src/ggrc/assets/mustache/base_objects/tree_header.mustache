{{!
    Copyright (C) 2015 Google Inc., authors, and contributors <see AUTHORS file>
    Licensed under http://www.apache.org/licenses/LICENSE-2.0 <see LICENSE file>
    Created By: miha@reciprocitylabs.com
    Maintained By: miha@reciprocitylabs.com
}}

{{{> "/static/mustache/base_objects/tree_view_filter.mustache"}}}
{{!log "Sasmita tree-header"}} {{!log .}}
<header class="header sticky tree-header {{#filter_is_hidden}}no-filter{{/filter_is_hidden}}">
  <div class="row-fluid">
    <div class="span4">
      <div class="title-heading oneline">
        {{model.title_singular}} Title
      </div>
    </div>

    <div class="span4">
      <div class="row-fluid">
        {{#display_attr_list}}
          <div class="span{{display_attr_width}}">
            <div class="oneline">
              {{attr_title}}
            </div>
          </div>
        {{/display_attr_list}}
      </div>
    </div>

    <div class="span4">
        <ul class="tree-action-list">
        {{#if_helpers '\
           #if_instance_of' parent_instance 'Regulation' '\
           and #if_in' model.shortName 'Section, Control, Objective' '\
           or #if_instance_of' parent_instance 'Contract' '\
           and #if_in' model.shortName 'Clause, Control, Objective' '\
           or #if_instance_of' parent_instance 'Policy' '\
           and #if_in' model.shortName 'Section, Control, Objective' '\
           or #if_instance_of' parent_instance 'Standard' '\
           and #if_in' model.shortName 'Section, Control, Objective' '\
           or #if_instance_of' parent_instance 'Program' '\
           and #if_in' model.shortName 'Control, Objective, System'}}
            {{#if allow_creating}}
              {{#is_allowed 'create' model.shortName context=null}}
                <li>
                  <a href="{{parent_instance.viewLink}}/import_{{model.table_plural}}?return_to={{param_current_location}}" class="section-import" rel="tooltip" data-placement="left" title="" data-original-title="Import {{model.model_plural}}">
                      <i class="grcicon-imp-exp"></i>
                  </a>
                </li>

              {{/is_allowed}}
            {{/if}}

            {{#if list.length}}
              <li>
                <a href="{{parent_instance.viewLink}}/export_{{model.table_plural}}?ids={{instance_ids list}}" class="section-import" rel="tooltip" data-placement="left" title="" data-original-title="Export {{model.model_plural}}">
                    <i class="grcicon-export"></i>
                </a>
              </li>
            {{/if}}
        {{/if_helpers}}

        <assessment-generator-button audit="parent_instance"></assessment-generator-button>
        {{{> "/static/mustache/base_objects/filter_trigger.mustache}}}
        <li>
          <a href="javascript://">
            <i class="grcicon-hide-relevant" rel="tooltip" data-placement="left" title="" data-original-title="Hide Irelevant"></i>
          </a>
        </li>

        <li>
          <a href="#" class="dropdown-toggle" data-toggle="dropdown"><i class="grcicon-setup-color"></i></a>
          <div class="dropdown-menu dropdown-menu-form">
            <h5>Set visible fields for {{model.title_singular}}</h5>
            <ul class="attr-list">
              {{#select_attr_list}}
              <li class="a-disabled">
                <label class="checkbox-inline">
                  <input type="checkbox"
                    {{#if_equals display_status 'true'}}checked="checked"{{/if_equals}}
                    {{#if_equals attr_title 'Title'}}disabled=""{{/if_equals}}
                    value="{{attr_name}}"
                    class="notify-wrap attr-checkbox"
                  >
                  {{attr_title}}
                </label>
              </li>
              {{/select_attr_list}}
            </ul>
            <button class="btn btn-small btn-info set-tree-attrs">Set fields</button>
            <button class="btn btn-small btn-info">Close</button>
          </div>
        </li>
      </ul>
    </div>
  </div>
</header>
<div class="clearfix"></div>
