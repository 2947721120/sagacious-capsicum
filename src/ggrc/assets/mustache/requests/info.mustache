{{!
    Copyright (C) 2013 Google Inc., authors, and contributors <see AUTHORS file>
    Licensed under http://www.apache.org/licenses/LICENSE-2.0 <see LICENSE file>
    Created By: brad@reciprocitylabs.com
    Maintained By: brad@reciprocitylabs.com
}}

{{#instance}}
  <section class="info">
    {{#is_info_pin}}
      {{> /static/mustache/base_objects/info-pin.mustache}}
    {{/is_info_pin}}
    {{> /static/mockups/base_objects/info_header.mustache}}

    <div class="row-fluid">
      <div class="span8">
        <div class="row-fluid wrap-row">
          <div class="span12">
            <h6>Description</h6>
            <div class="rtf-block">
              {{description}}
            </div>
          </div>
        </div>
        <div class="row-fluid wrap-row">
          <div class="span6">
            <div class="left-spacing">
              <h6>Evidence</h6>
            </div>
          </div>
          <div class="span6">
            <h6>Url</h6>
          </div>
        </div>

        <div class="row-fluid wrap-row">
          <div class="span12">
            <h6>Test</h6>
            {{{test}}}
          </div>
        </div>

        <div class="row-fluid wrap-row">
          <div class="span12">
            <h6>Notes</h6>
            {{{notes}}}
          </div>
        </div>
        {{#options}}
        <div class="row-fluid wrap-row">
          <div class="span12">
            {{log child_options}}
            {{#child_options.0}}
            <h6>Mapped objects</h6>
              <ul class="tree-structure new-tree" {{data 'options'}}
                {{ (el) -> el.cms_controllers_tree_view(el.data("options")) }}>
              </ul>
              {{#is_allowed_to_map instance model.shortName}}
                <a
                  class="btn btn-draft btn-small"
                  href="javascript://"
                  rel="tooltip"
                  data-placement="left"
                  data-toggle="unified-mapper"
                  data-join-mapping="related_objects"
                  data-join-option-type="{{model.shortName}}"
                  data-join-object-id="{{instance.id}}"
                  data-join-object-type="{{instance.class.shortName}}"
                  data-original-title="Map {{firstnonempty title_singular model.title_singular 'Object'}} to this {{firstnonempty instance.class.title_singular 'Object'}}">
                  Map Objects
                </a>
              {{/if}}
            {{/child_options.0}}
          </div>
        </div>
        {{/options}}
      </div>

      <div class="span4">
        <div class="row-fluid wrap-row">
          <div class="span12">
            <h6>People</h6>
          </div>
        </div>

        <div class="row-fluid wrap-row">
          <div class="span12">
            <h6>Dates</h6>
            <div class="side-content">
              <ul class="label-list dates">
                <li class="gray">
                  <label>
                    Created on
                  </label>
                  {{date created_at}}
                </li>
                <li>
                  <span class="file-controls">
                    <a href="javascript://"><i class="grcicon-edit"></i></a>
                  </span>
                  <label>
                    Due on
                  </label>
                  {{date due_on}}
                </li>
              </ul>
            </div>
          </div>
        </div>

        <div class="row-fluid wrap-row">
          <div class="span12">
            <h6>Code</h6>
            <div class="side-content">
              {{slug}}
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>

{{/instance}}
