-# locals: instance

%li.tab-title-holder

  %script#person_list_item{ 'type': 'text/html', 'data-member': 'object_person', 'data-role': 'Accountable' }
    %li.controlSlot{ 'data-id': '<%= person.id %>' }
      .item-main
        .item-title
          .row-fluid
            .span12
              .oneline
                %span.addition-info
                  %a{ 'href': 'mailto:<%= person.email %>', 'rel': 'tooltip', 'title': '<%= person.email %>' }
                    <%= person.name && person.name.trim() || person.email %>
                  %span.role
                    <%= role %>

  %ul#personList.tree-structure{ 'data-template-id': 'person_list_item' }
    -for object_item in instance.object_people
      -set item = object_item.person
      %li{ 'data-id': '={ item.id }' }
        .item-main
          .item-title
            .row-fluid
              .span12
                .oneline
                  %span.addition-info
                    -if item.name and item.email
                      %a{ 'href': 'mailto:={ item.email }', 'target': '_blank', 'rel': 'tooltip', 'title': '={ item.email }' }
                        =item.name
                    -elif item.name
                      =item.name
                    -elif item.email
                      %a{ 'href': 'mailto:={ item.email }', 'target': '_blank' }
                        =item.email
                    -else
                      ="&nbsp".html_safe
                    %span.role
                      =object_item.role
