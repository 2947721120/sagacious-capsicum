<li class="tree-item program task-group-index" data-index="{{@index}}">
    <div class="item-main" data-model="true" {{data 'model'}}>
      <div class="openclose">
        <div class="row-fluid">
          <div class="span12">
            <ul class="tree-action-list">
              <li>
                <i class="grcicon-person-green pull-left icon-field"></i>
                <div class="objective-selector">
                  {{#using assignee=instance.contact}}
                  <input tabindex="1" type="text" name="lead_email" class="saveTaskGroupField span10 search-icon short-field autocomplete" data-lookup="Person" placeholder="Choose Assignee" value="{{assignee.email}}" data-index="{{@index}}" data-field="assignee">
                  {{/using}}
                </div>
              </li>
              <li>
                <label class="pull-left inline-black">due date:</label>
                <input tabindex="2" class="span7 date saveTaskGroupField short-field" data-index="{{@index}}" data-field="end_date" name="end_date" data-toggle="datepicker" data-after="end_date" placeholder="MM/DD/YYYY" type="text" value="{{instance.end_date}}">
              </li>

              <li>
                {{#with_mapping 'objects' instance}}
                <span class="counter" rel="tooltip" data-placement="left" data-original-title="# of mapped objects">
                  <i class="grcicon-object-black"></i>
                  <strong class="error">{{objects.length}}</strong>
                </span>
                {{/with_mapping}}
              </li>
              <li>
                {{#with_mapping 'tasks' instance}}
                <span class="counter" rel="tooltip" data-placement="left" data-original-title="# of mapped tasks">
                  <i class="grcicon-task-black"></i>
                  <strong class="error">{{tasks.length}}</strong>
                </span>
                {{/with_mapping}}
              </li>
              <li>
                <span class="counter removeTaskGroup" data-index="{{@index}}">
                  <i class="grcicon-deleted"></i>
                </span>
              </li>
            </ul>
            <div class="item-data">
              <div class="tree-title-area">
                {{instance.title}}
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
    <div class="tier-2-info item-content" style="display: none;">
      <div class="tier-2-info-content">
        <div class="show-description">
          <div class="row-fluid">
            <div class="span6 task-group-title">
              <h3 class=".taskGroupTitle">
                {{instance.title}}
                <a href="#" class="toggleClosest"><i class="grcicon-edit"></i></a>
              </h3>
              <div class="taskGroupTitleForm edit-field hide">
                <input type="text" value="{{title}}" class="pull-left saveTaskGroupField" data-index="{{@index}}" data-field="title">
                <a href="#" id="editFieldSave" class="btn btn-success pull-left toggleClosest">Save</a>
                <a href="#" id="editFieldCancel" class="pull-left toggleClosest cancel-text"><i class="grcicon-x-grey"></i>Cancel</a>
              </div>
            </div>
          </div>
          <div class="row-fluid">
            <div class="span12">
              {{#if_equals instance.description ""}}
              <a href="#" class="toggleClosest">+ Add Description</a>
              {{else}}
              {{{instance.description}}}<a class="task-edit-icon toggleClosest" href="#"><i class="grcicon-edit"></i></a>
              {{/if_equals}}
            </div>
            <div class="hide">
              <div class="wysiwyg-area">
                <textarea id="program_description" class="span12 double wysihtml5 saveTaskGroupField" data-index="{{@index}}" data-field="description" name="description" placeholder="Enter Description" tabindex="3">{{{instance.description}}}</textarea>
              </div>
              <a href="#" class="btn btn-success toggleClosest">Save</a>
              <a href="#" class="toggleClosest cancel-text"><i class="grcicon-x-grey"></i>Cancel</a>
            </div>
          </div>
          <br>


      {{#if draw_children}}
        {{#prune_context}} {{! this line is just chopping the context stack down to one element}}
          
          <div class="row-fluid">
            {{#child_options.0}}
            <div class="span6">
              <strong>Objects (<span>{{list.length}}{{#if_null list}}...{{/if_null}}</span>)</strong><br>
              <ul class="items-list tree-structure new-tree" {{data 'options'}} {{ (el) -> el.cms_controllers_tree_view(el.data("options")) }}></ul>
              </ul>
            </div>
            {{/child_options.0}}


            {{#child_options.1}}
            <div class="span6 task-list">
              {{#if list.length}}
              {{^if_equals list.length 1}}
              <span class="pull-right lock-wrap">
                <label>
                  <input type="checkbox" class="taskLock" data-index="{{@index}}" {{#taskLock}}checked="checked"{{/taskLock}}>
                  Lock Task Order
                </label>
              </span>
              {{/if_equals}}
              {{/if}}
              <strong>Tasks (<span>{{list.length}}{{#if_null list}}...{{/if_null}}</span>)</strong><br>
              <ul class="tree-structure new-tree" {{data 'options'}} {{ (el) -> el.cms_controllers_tree_view(el.data("options")) }}></ul>

            </div>
            {{/child_options.1}}
          </div>
        {{/prune_context}}
      {{/if}}

        </div>
      </div>
    </div>
  </li>
