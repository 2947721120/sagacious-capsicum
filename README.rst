*********
gGRC核心
*********

要求
============

以下软件需要站起来ggrc核心发展
环境：

..名单表::
   ：宽度：30 70
   ：报头行：1

   * - 前提条件
      - 说明
   * - `VirtualBox的<https://www.virtualbox.org/>`_
      - 甲骨文的VirtualBox虚拟机播放器
   * - '流浪<http://www.vagrantup.com/>`_
      - 方便的脚本化的虚拟机管理
   * - '图书管理员（红宝石宝石）<http://rubygems.org/gems/librarian>`_
      - Ruby包管理框架。
   * - `馆员厨师（红宝石宝石）<http://rubygems.org/gems/librarian-chef>`_
      - `Opscode厨师<http://www.opscode.com/chef/>`_食谱经理。

快速开始
===========

开始ggrc核心的发展应该是快速和容易的一旦你

有先安装软件下面是步骤：

*克隆回购
* CWD到项目目录
*运行以下命令：

..源代码::庆典

  混帐子模块更新--init
  馆员厨师装
  无业游民了
  无业游民SSH
  build_compass
  build_assets
  db_reset

如果您在``流浪汉up``阶段看下载错误，或者任何后续
步骤失败，尝试运行``无业游民provision``（见'提供一个正在运行的放浪
下面VM`_更多）。

现在你在虚拟机和准备摇滚。去工作吧！

启动gGRC作为单独瓶
-----------------------------------

我们努力使越来越运行起来越简单越好;为此，
启动应用程序很简单：

..源代码::庆典

   launch_ggrc

在谷歌的App Engine SDK启动gGRC
---------------------------------------

我们努力使越来越运行起来越简单越好;为此，
在推出谷歌应用程序引擎的SDK环境中的应用很简单：

..源代码::庆典

   launch_gae_ggrc

访问应用程序
-------------------------

该应用程序将通过这个网址进行访问：HTTP：//本地主机：8080 /

如果你正在运行的谷歌应用程序引擎的SDK，App Engine的管理控制台
将通过这个网址是缴费：HTTP：//本地主机：8000 /

运行单元测试
------------------

..源代码::庆典

   run_unittests

舞动运行测试的集成
--------------------------------

..源代码::庆典

   run_behave

快速启动故障
====================

上面的快速启动提供了一窥gGRC开发环境。
值得注意的是，其中有自动化gGRC，哪里没有。
往往一个步骤缺乏自动化支持是故意的。让我们来探讨
每个步骤的细节。

在gGRC Git的子模块
----------------------

gGRC会利用某些外部工具的Sass模板和JavaScript表单
处理。为了有相关的资料库签出的混帐
子模块下面的命令必须在项目目录中发出：

..源代码::庆典

  git的子模块的init

此步骤的缺乏自动化的是故意的。首先，它必须在做
主机操作系统，而不是流浪虚拟机。其次，在执行
这一步通知新gGRC显影剂有GIT中子模块是
关心，导致第二步骤：

..源代码::庆典

  混帐子模块更新

作为依赖关系随时间而改变，有必要开发人员
更新到一个或一个以上的子模块的一个新版本。

Librian和厨师
----------------

gGRC核心同时提供了``Vagrantfile``和``Cheffile``做出站立
一个开发环境简单，重复性好感谢的魔力
放浪，厨师和馆员厨师。流浪使开发人员能够使用
一致和共享的虚拟机配置执行应用程序的测试，同时
使开发人员能够使用自己选择的源代码编辑环境。
图书管理员，厨师宝石提供所需的厨师食谱管理
提供开发VM，具有所需的软件包。

更新食谱与``馆员chef``
''''''''''''''''''''''''''''''''''''''''

当更改了Cheffile``做馆员chef``将需要运行
更新安装的食谱。

..源代码::庆典

  馆员厨师装

流浪汉
-------

该应用程序是在虚拟机环境中运行，可以是重复地，
持续，可靠地构建感谢放浪。为了使用
流浪创建和管理开发的虚拟机环境中，它
必须首先从项目发出以下命令来创建
目录：

..源代码::庆典

  无业游民了

这导致创建虚拟机的和的提供
所需的软件，以支持gGRC的开发和执行。

另配一个流浪VM
'''''''''''''''''''''''''''

有几种方法来更新一个流浪者VM的配置变化时，
已作出的食谱或其他依赖管理机制
gGRC。

提供一个正在运行的虚拟机流浪汉
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

要运行上运行的流浪虚拟机配置，只需运行在以下
项目目录：

..源代码::庆典

  流浪者提供

供应暂停的流浪VM
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

如果您已通过``无业游民halt``，只需``流浪汉up``停止你的放浪VM
在项目目录有供应运行和更新开发
环境。

洗涮配置
^^^^^^^^^^^^^^^^^^^^^^^^

要在流浪VM创建一个干净的石板环境中，您可以重新加载或
重新创建环境。要重新加载环境发出以下命令
在项目目录：

..源代码::庆典

  无业游民重装

要完全重新创建环境中发出以下命令
项目目录：

..源代码::庆典

  无业游民破坏
  无业游民了

萨斯编译模板
------------------------

由于gGRC使用萨斯对CSS模板，模板需要编译。
然而，这已经通过脚本命令自动化提供的道路上
在虚拟机中：

..源代码::庆典

  build_compass

有一个过程看萨斯资源，编译他们，因为他们改变
你可以使用这个命令：

..源代码::庆典

  watch_compass

编译资产
----------------

对于所需的其他资产捆绑销售，还有就是下面的命令：

..源代码::庆典

  build_assets

至于罗盘，还有一个资产生成器，可以观看更改和更新
他们，因为他们改变：

..源代码::庆典

  watch_assets

陷阱
=======

后再同步gGRC核心的本地克隆后，您可能会遇到失败的时候
试图运行应用程序由于发生变化（通常是添加）到
先决条件。

有对gGRC核心要求三个主要类别：子模块，
食谱和Python包。食谱通过在说明书中管理
``Cheffile``而Python包通过在PIP规范管理
要求的文件。

有两个PIP要求文件：一个运行时要求的文件，
``的src / requirements.txt``，对于应用程序包的依赖关系和
发展要求的文件，``SRC的/ dev-requirements.txt``，额外
开发时间软件包的依赖关系。运行时要求部署
与应用程序，而发展要求的仅用于
开发环境（主要用于测试目的）。

大多数要求的变化应该在任``的src / requirements.txt``或
``SRC的/ dev-requirements.txt``，并会表现出自己作为模块导入
故障。

环境变量
---------------------

GGRC_SETTINGS_MODULE：
  GGRC使用这个环境变量中定义的模块（S）
  ``ggrc.settings``在引导阶段使用。该值可以是一个
  或多个空间分隔的模块名称，将在相同的施加
  为了他们指定的。 ``源斌/ init_env``会将该值设为
  ``development``。

详情关于VM文件结构
-------------------------------

``游民provision``全球范围内安装几个Debian软件包
VM。所有其他的项目数据包含两个目录内，由指定的
环境变量（和``定义的/ home /游民/ .bashrc``）。

PREFIX：
  点Git仓库的根目录下，并自动为
  如果不存在进行检测。

DEV_PREFIX：
  点，含``tmp``和``opt``目录的目录。如果不
  定义，``DEV_PREFIX``默认为``PREFIX``的价值。 （在该VM，
  它被定义为``/流浪汉-dev``以避免由共享减速
  文件系统在``/ vagrant``）。

需求变更的文件
-----------------------------

首先来尝试解决问题，由于缺少必备条件是
问题从主机在项目目录中是以下命令
操作系统（你正在运行的VM）：

..源代码::庆典

   流浪者提供

这将促使无业游民运行厨师置备。这样做的结果
指令* *应该是包含Python包的更新的Python的virtualenv
由应用程序以及任何新开发包所需
要求。然而，这可能不是这样的情况，并可能会遇到一个
设置失败由于改变``Cheffile``。

运行``流浪汉provision``将运行在虚拟机下面的更新
开发环境。

..源代码::庆典

   使
   PIP安装-r SRC的/ dev-requirements.txt
   PIP安装--no-DEPS -r的src / requirements.txt

请注意，如果你使用``launch_gae_ggrc``，然后切换到
``的src / requirements.txt``需要重建``的src / packages.zip``通过
``让appengine_packages_zip``。 （这也由``make``步骤处理
通过``无业游民provision``运行。

Cheffile变化
----------------

加入食谱的该项目的先决条件可以导致供应
故障。解决的办法是在``cookbooks``更新食谱
目录由项目目录中发出以下命令：

..源代码::庆典

   馆员厨师装
   流浪者提供

更改``站点cookbooks``
-----------------------------

更改由gGRC本身定义的食谱也可能会导致错误。该
解决方案是另配流浪VM：

..源代码::庆典

  流浪者提供

Git的子模块的变化
---------------------

项目所需的git的子模块的改变也可能导致
的错误，特别是在应用程序的前端的HTML部。该
溶液是更新子模块：

..源代码::庆典

  混帐子模块更新

鉴于萨斯和Javascript相关的项目都包含在子模块
gGRC的要求，它也可能有必要重建萨斯等
网络资产：

..源代码::庆典

  build_compass
  build_assets
